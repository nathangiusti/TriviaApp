<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trivia App</title>
    <link rel="stylesheet" href="/frontend/css/styles.css">
</head>
<body>
    <div class="container">
        <!-- Home Screen -->
        <div id="home-screen" class="card">
            <h1>üéØ Trivia Competition</h1>
            
            <!-- Player Join Form -->
            <div id="player-join-form">
                <h2>Join Game</h2>
                <div class="form-group">
                    <label for="game-id">Game ID:</label>
                    <input type="text" id="game-id" placeholder="Enter game ID" required>
                </div>
                <div class="form-group">
                    <label for="team-name">Team Name:</label>
                    <input type="text" id="team-name" placeholder="Enter your team name" required>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="joinGame()">Join Game</button>
                </div>
            </div>
        </div>
        
        <!-- Waiting Room -->
        <div id="waiting-room" class="card hidden" style="display: none !important;">
            <h1>üïê Waiting Room</h1>
            <div id="game-info">
                <h3>Game: <span id="current-game-id"></span></h3>
                <div class="status waiting">Waiting for game to start...</div>
            </div>
            
            <div class="team-info" id="team-info">
                <h3>Your Team: <span id="current-team-name"></span></h3>
            </div>
            
            <div class="teams-section">
                <h3>Teams Registered</h3>
                <ul id="teams-list" class="team-list">
                    <!-- Teams will be populated here -->
                </ul>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-danger" onclick="leaveGame()">Leave Game</button>
            </div>
        </div>
        
        <!-- Game Screen -->
        <div id="game-screen" class="card hidden" style="display: none !important;">
            <h1>üéØ Trivia Game</h1>
            
            <!-- Game Status -->
            <div class="status active" id="game-status">Game in Progress</div>
            
            <!-- Question Display -->
            <div id="question-display" class="question-card hidden">
                <div class="question-meta">
                    Round <span id="question-round"></span> - Question <span id="question-number"></span>
                </div>
                <div class="question-text" id="question-text"></div>
                
                <!-- Answer Form (for teams) -->
                <div id="answer-form" class="answer-form hidden">
                    <div class="form-group">
                        <input type="text" id="answer-input" class="answer-input" placeholder="Enter your answer..." required>
                    </div>
                    <button class="btn btn-primary" onclick="submitAnswer()" id="submit-btn">Submit Answer</button>
                </div>
                
                <!-- Answer Submitted (for teams) -->
                <div id="answer-submitted" class="hidden">
                    <div class="alert success">
                        ‚úÖ Answer submitted! Waiting for results...
                    </div>
                </div>
            </div>
            
            <!-- Question Closed Display -->
            <div id="question-closed" class="hidden">
                <div class="alert info">
                    ‚è∞ Question closed. Awaiting results...
                </div>
            </div>
            
            <!-- Results Display -->
            <div id="results-display" class="hidden">
                <h3>Question Results</h3>
                <div id="results-content"></div>
            </div>
            
            <!-- Current Leaderboard -->
            <div class="leaderboard" id="leaderboard">
                <div class="leaderboard-header">
                    <h3>üèÜ Leaderboard</h3>
                </div>
                <ul id="leaderboard-list" class="leaderboard-list">
                    <!-- Leaderboard will be populated here -->
                </ul>
            </div>
        </div>
        
        
        <!-- Game Finished -->
        <div id="game-finished" class="card hidden" style="display: none !important;">
            <h1>üéâ Game Complete!</h1>
            <div class="leaderboard">
                <div class="leaderboard-header">
                    <h3>üèÜ Final Results</h3>
                </div>
                <ul id="final-leaderboard" class="leaderboard-list">
                    <!-- Final leaderboard will be populated here -->
                </ul>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="startNewGame()">New Game</button>
            </div>
        </div>
        
        <!-- Connection Status -->
        <div id="connection-status" class="connection-status disconnected">
            Connecting...
        </div>
    </div>
    
    <!-- Rejoin Modal -->
    <div id="rejoin-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Reconnect to Game</h3>
            </div>
            <p>You were previously in game <strong id="rejoin-game-id"></strong>.</p>
            <p>Enter your team name to reconnect:</p>
            <div class="form-group">
                <label for="rejoin-team-name">Team Name:</label>
                <input type="text" id="rejoin-team-name" placeholder="Enter your team name">
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="gameClient.confirmRejoin()">Rejoin Game</button>
                <button class="btn btn-secondary" onclick="gameClient.hideRejoinPrompt(); gameClient.clearGameState(); showHome();">Start Fresh</button>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="/frontend/js/game-client.js"></script>
    <script src="/frontend/js/app.js"></script>
</body>
</html>